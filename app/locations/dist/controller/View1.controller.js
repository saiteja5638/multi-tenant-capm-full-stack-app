sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";var t;return e.extend("locations.controller.View1",{onInit:function(){t=this;if(!t.create){t.create=sap.ui.xmlfragment("locations.view.createlocation",t)}t.callData()},callData:async function(){try{const e=await fetch("/odata/v4/catalog/LOCATION",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(!e.ok){throw new Error(`HTTP error ${e.status}`)}const a=await e.json();let o=new sap.ui.model.json.JSONModel({items:a.value});t.byId("_IDGenTable").setModel(o)}catch(e){console.error("Fetch failed:",e)}},onOpenLocation:function(){t.create.open()},onCloseLocation:function(){t.create.close()},onCreateLocation:async function(){const e={LOCATION_ID:sap.ui.getCore().byId("inputLocationId").getValue(),LOCATION_DESC:sap.ui.getCore().byId("inputLocationDesc").getValue(),LOCATION_TYPE:sap.ui.getCore().byId("inputLocationType").getValue(),LATITUDE:parseFloat(sap.ui.getCore().byId("inputLatitude").getValue()),LONGITUTE:parseFloat(sap.ui.getCore().byId("inputLongitude").getValue())};try{const a=await fetch("/odata/v4/catalog/LOCATION",{method:"GET",headers:{"X-CSRF-Token":"Fetch"},credentials:"include"});const o=a.headers.get("x-csrf-token");const n=await fetch("/odata/v4/catalog/LOCATION",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":o},body:JSON.stringify(e),credentials:"include"});t.create.close();t.callData()}catch(e){console.error("Error adding location:",e);t.create.close();alert("Failed to add location. Check console for details.")}}})});
//# sourceMappingURL=View1.controller.js.map